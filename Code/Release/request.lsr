STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 1  Assembler
                                               e:\stm8s\elevator\request.asm

   1                         stm8/     
   2                         
   0  000000                                 #include "Request.inc"
   1                         
   2  000000 U                               #IFDEF   __REQUEST_ 1
   4  000000                                 #define  __REQUEST_ 1
   0  000000                                 #include "Variable.inc"
   1                         
   2  000000 U                               #IFDEF   __VARIABLE_ 1
   4                                   
   5  000000                                 #define  MAX_FLOOR 8
   6                                   
   7  000000                                 #define  REQ_NULL 0
   8  000000                                 #define  REQ_DOWN 00000001B
   9  000000                                 #define  REQ_UP 00000010B
  10  000000                                 #define  REQ_UP_DOWN 0000011B
  11                                   
  12  000000                                 #define  False 0
  13  000000                                 #define  True 1
  14                                   
  15                         
  16  000000                                 #define  TARGET_QUEUE_TOP 5FFH
  17                         
  18  000000                                 #define  STATUS_MOV 1
  19  000000                                 #define  STATUS_IDLE 0
  20  000000                                 #define  STATUS_OPEN 2
  21  000000                                 #define  STATUS_CLOSE 3
  22                                                          ; #define STATUS_DOWN 00000001B
  23                                                          ; #define STATUS_UP 00000010B
  24                                                          ; #define STATUS_STAY 0000011B
  25                         
  26  000000                                 #define  DIR_NULL 00000000B
  27  000000                                 #define  DIR_DOWN 00000001B
  28  000000                                 #define  DIR_UP 00000010B
  29                         
  30  000000                                 #define  INVALID_TARGET 0
  31                         
   0  000000                                 #include "STM8S105K4.inc"
   1                         ; STM8S105K4.inc
   2  000000 U                               #IFDEF   __INCLUDE_STM8S105K4_
   4  000000                                 #define  __INCLUDE_STM8S105K4_ 1
   0  000000                                 #include "STM8S105K.inc"
   1                         ; STM8S105K.inc
   2                         
   3                         ; Copyright (c) 2003-2012 STMicroelectronics
   4                         
   5  000000 U                               #ifdef   __STM8S105K__
   8  000000                                 #define  __STM8S105K__ 1
   9                         
  10                         ; STM8S105K
  11                         
  12                         
  13                         ; Port A
  14                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
  15                         
  16  000000                                 EXTERN   PA_ODR.w      ; Port A data output latch 
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 2  Assembler
                                               e:\stm8s\elevator\request.asm

                                                                ;register
  17                         
  18  000000                                 EXTERN   PA_IDR.w      ; Port A input pin value 
                                                                ;register
  19                         
  20  000000                                 EXTERN   PA_DDR.w      ; Port A data direction 
                                                                ;register
  21                         
  22  000000                                 EXTERN   PA_CR1.w      ; Port A control register 1
  23                         
  24  000000                                 EXTERN   PA_CR2.w      ; Port A control register 2
  25                         
  26                         ; Port B
  27                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
  28                         
  29  000000                                 EXTERN   PB_ODR.w      ; Port B data output latch 
                                                                ;register
  30                         
  31  000000                                 EXTERN   PB_IDR.w      ; Port B input pin value 
                                                                ;register
  32                         
  33  000000                                 EXTERN   PB_DDR.w      ; Port B data direction 
                                                                ;register
  34                         
  35  000000                                 EXTERN   PB_CR1.w      ; Port B control register 1
  36                         
  37  000000                                 EXTERN   PB_CR2.w      ; Port B control register 2
  38                         
  39                         ; Port C
  40                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
  41                         
  42  000000                                 EXTERN   PC_ODR.w      ; Port C data output latch 
                                                                ;register
  43                         
  44  000000                                 EXTERN   PC_IDR.w      ; Port C input pin value 
                                                                ;register
  45                         
  46  000000                                 EXTERN   PC_DDR.w      ; Port C data direction 
                                                                ;register
  47                         
  48  000000                                 EXTERN   PC_CR1.w      ; Port C control register 1
  49                         
  50  000000                                 EXTERN   PC_CR2.w      ; Port C control register 2
  51                         
  52                         ; Port D
  53                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
  54                         
  55  000000                                 EXTERN   PD_ODR.w      ; Port D data output latch 
                                                                ;register
  56                         
  57  000000                                 EXTERN   PD_IDR.w      ; Port D input pin value 
                                                                ;register
  58                         
  59  000000                                 EXTERN   PD_DDR.w      ; Port D data direction 
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 3  Assembler
                                               e:\stm8s\elevator\request.asm

                                                                ;register
  60                         
  61  000000                                 EXTERN   PD_CR1.w      ; Port D control register 1
  62                         
  63  000000                                 EXTERN   PD_CR2.w      ; Port D control register 2
  64                         
  65                         ; Port E
  66                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
  67                         
  68  000000                                 EXTERN   PE_ODR.w      ; Port E data output latch 
                                                                ;register
  69                         
  70  000000                                 EXTERN   PE_IDR.w      ; Port E input pin value 
                                                                ;register
  71                         
  72  000000                                 EXTERN   PE_DDR.w      ; Port E data direction 
                                                                ;register
  73                         
  74  000000                                 EXTERN   PE_CR1.w      ; Port E control register 1
  75                         
  76  000000                                 EXTERN   PE_CR2.w      ; Port E control register 2
  77                         
  78                         ; Port F
  79                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
  80                         
  81  000000                                 EXTERN   PF_ODR.w      ; Port F data output latch 
                                                                ;register
  82                         
  83  000000                                 EXTERN   PF_IDR.w      ; Port F input pin value 
                                                                ;register
  84                         
  85  000000                                 EXTERN   PF_DDR.w      ; Port F data direction 
                                                                ;register
  86                         
  87  000000                                 EXTERN   PF_CR1.w      ; Port F control register 1
  88                         
  89  000000                                 EXTERN   PF_CR2.w      ; Port F control register 2
  90                         
  91                         ; Flash
  92                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
  93                         
  94  000000                                 EXTERN   FLASH_CR1.w   ; Flash control register 1
  95                         
  96  000000                                 EXTERN   FLASH_CR2.w   ; Flash control register 2
  97                         
  98  000000                                 EXTERN   FLASH_NCR2.w  ; Flash complementary control 
                                                                ;register 2
  99                         
 100  000000                                 EXTERN   FLASH_FPR.w   ; Flash protection register
 101                         
 102  000000                                 EXTERN   FLASH_NFPR.w  ; Flash complementary protection
                                                                ; register
 103                         
 104  000000                                 EXTERN   FLASH_IAPSR.w  ; Flash in-application 
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 4  Assembler
                                               e:\stm8s\elevator\request.asm

                                                                ;programming status register
 105                         
 106  000000                                 EXTERN   FLASH_PUKR.w  ; Flash Program memory 
                                                                ;unprotection register
 107                         
 108  000000                                 EXTERN   FLASH_DUKR.w  ; Data EEPROM unprotection 
                                                                ;register
 109                         
 110                         ; External Interrupt Control Register (ITC)
 111                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 112                         
 113  000000                                 EXTERN   EXTI_CR1.w    ; External interrupt control 
                                                                ;register 1
 114                         
 115  000000                                 EXTERN   EXTI_CR2.w    ; External interrupt control 
                                                                ;register 2
 116                         
 117                         ; Reset (RST)
 118                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 119                         
 120  000000                                 EXTERN   RST_SR.w      ; Reset status register 1
 121                         
 122                         ; Clock Control (CLK)
 123                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 124                         
 125  000000                                 EXTERN   CLK_ICKR.w    ; Internal clock control 
                                                                ;register
 126                         
 127  000000                                 EXTERN   CLK_ECKR.w    ; External clock control 
                                                                ;register
 128                         
 129  000000                                 EXTERN   CLK_CMSR.w    ; Clock master status register
 130                         
 131  000000                                 EXTERN   CLK_SWR.w     ; Clock master switch register
 132                         
 133  000000                                 EXTERN   CLK_SWCR.w    ; Clock switch control register
 134                         
 135  000000                                 EXTERN   CLK_CKDIVR.w  ; Clock divider register
 136                         
 137  000000                                 EXTERN   CLK_PCKENR1.w  ; Peripheral clock gating 
                                                                ;register 1
 138                         
 139  000000                                 EXTERN   CLK_CSSR.w    ; Clock security system 
                                                                ;register
 140                         
 141  000000                                 EXTERN   CLK_CCOR.w    ; Configurable clock control 
                                                                ;register
 142                         
 143  000000                                 EXTERN   CLK_PCKENR2.w  ; Peripheral clock gating 
                                                                ;register 2
 144                         
 145  000000                                 EXTERN   CLK_CANCCR.w  ; CAN clock control register
 146                         
 147  000000                                 EXTERN   CLK_HSITRIMR.w  ; HSI clock calibration trimming
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 5  Assembler
                                               e:\stm8s\elevator\request.asm

                                                                ; register
 148                         
 149  000000                                 EXTERN   CLK_SWIMCCR.w  ; SWIM clock control register
 150                         
 151                         ; Window Watchdog (WWDG)
 152                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 153                         
 154  000000                                 EXTERN   WWDG_CR.w     ; WWDG Control Register
 155                         
 156  000000                                 EXTERN   WWDG_WR.w     ; WWDR Window Register
 157                         
 158                         ; Independent Watchdog (IWDG)
 159                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 160                         
 161  000000                                 EXTERN   IWDG_KR.w     ; IWDG Key Register
 162                         
 163  000000                                 EXTERN   IWDG_PR.w     ; IWDG Prescaler Register
 164                         
 165  000000                                 EXTERN   IWDG_RLR.w    ; IWDG Reload Register
 166                         
 167                         ; Auto Wake-Up (AWU)
 168                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 169                         
 170  000000                                 EXTERN   AWU_CSR.w     ; AWU Control/Status Register
 171                         
 172  000000                                 EXTERN   AWU_APR.w     ; AWU asynchronous prescaler 
                                                                ;buffer register
 173                         
 174  000000                                 EXTERN   AWU_TBR.w     ; AWU Timebase selection 
                                                                ;register
 175                         
 176                         ; Beeper (BEEP)
 177                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 178                         
 179  000000                                 EXTERN   BEEP_CSR.w    ; BEEP Control/Status Register
 180                         
 181                         ; Serial Peripheral Interface (SPI)
 182                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 183                         
 184  000000                                 EXTERN   SPI_CR1.w     ; SPI Control Register 1
 185                         
 186  000000                                 EXTERN   SPI_CR2.w     ; SPI Control Register 2
 187                         
 188  000000                                 EXTERN   SPI_ICR.w     ; SPI Interrupt Control 
                                                                ;Register
 189                         
 190  000000                                 EXTERN   SPI_SR.w      ; SPI Status Register
 191                         
 192  000000                                 EXTERN   SPI_DR.w      ; SPI Data Register
 193                         
 194  000000                                 EXTERN   SPI_CRCPR.w   ; SPI CRC Polynomial Register
 195                         
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 6  Assembler
                                               e:\stm8s\elevator\request.asm

 196  000000                                 EXTERN   SPI_RXCRCR.w  ; SPI Rx CRC Register
 197                         
 198  000000                                 EXTERN   SPI_TXCRCR.w  ; SPI Tx CRC Register
 199                         
 200                         ; I2C Bus Interface (I2C)
 201                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 202                         
 203  000000                                 EXTERN   I2C_CR1.w     ; I2C control register 1
 204                         
 205  000000                                 EXTERN   I2C_CR2.w     ; I2C control register 2
 206                         
 207  000000                                 EXTERN   I2C_FREQR.w   ; I2C frequency register
 208                         
 209  000000                                 EXTERN   I2C_OARL.w    ; I2C Own address register low
 210                         
 211  000000                                 EXTERN   I2C_OARH.w    ; I2C Own address register high
 212                         
 213  000000                                 EXTERN   I2C_DR.w      ; I2C data register
 214                         
 215  000000                                 EXTERN   I2C_SR1.w     ; I2C status register 1
 216                         
 217  000000                                 EXTERN   I2C_SR2.w     ; I2C status register 2
 218                         
 219  000000                                 EXTERN   I2C_SR3.w     ; I2C status register 3
 220                         
 221  000000                                 EXTERN   I2C_ITR.w     ; I2C interrupt control 
                                                                ;register
 222                         
 223  000000                                 EXTERN   I2C_CCRL.w    ; I2C Clock control register 
                                                                ;low
 224                         
 225  000000                                 EXTERN   I2C_CCRH.w    ; I2C Clock control register 
                                                                ;high
 226                         
 227  000000                                 EXTERN   I2C_TRISER.w  ; I2C TRISE register
 228                         
 229  000000                                 EXTERN   I2C_PECR.w    ; I2C packet error checking 
                                                                ;register
 230                         
 231                         ; LIN Universal asynch. receiver transmitter (UART2)
 232                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 233                         
 234  000000                                 EXTERN   UART2_SR.w    ; UART2 Status Register
 235                         
 236  000000                                 EXTERN   UART2_DR.w    ; UART2 Data Register
 237                         
 238  000000                                 EXTERN   UART2_BRR1.w  ; UART2 Baud Rate Register 1
 239                         
 240  000000                                 EXTERN   UART2_BRR2.w  ; UART2 Baud Rate Register 2
 241                         
 242  000000                                 EXTERN   UART2_CR1.w   ; UART2 Control Register 1
 243                         
 244  000000                                 EXTERN   UART2_CR2.w   ; UART2 Control Register 2
 245                         
 246  000000                                 EXTERN   UART2_CR3.w   ; UART2 Control Register 3
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 7  Assembler
                                               e:\stm8s\elevator\request.asm

 247                         
 248  000000                                 EXTERN   UART2_CR4.w   ; UART2 Control Register 4
 249                         
 250  000000                                 EXTERN   UART2_CR5.w   ; UART2 Control Register 5
 251                         
 252  000000                                 EXTERN   UART2_CR6.w   ; UART2 Control Register 6
 253                         
 254  000000                                 EXTERN   UART2_GTR.w   ; UART2 Guard time Register
 255                         
 256  000000                                 EXTERN   UART2_PSCR.w  ; UART2 Prescaler Register
 257                         
 258                         ; 16-Bit Timer 1 (TIM1)
 259                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 260                         
 261  000000                                 EXTERN   TIM1_CR1.w    ; TIM1 Control register 1
 262                         
 263  000000                                 EXTERN   TIM1_CR2.w    ; TIM1 Control register 2
 264                         
 265  000000                                 EXTERN   TIM1_SMCR.w   ; TIM1 Slave Mode Control 
                                                                ;register
 266                         
 267  000000                                 EXTERN   TIM1_ETR.w    ; TIM1 external trigger 
                                                                ;register
 268                         
 269  000000                                 EXTERN   TIM1_IER.w    ; TIM1 Interrupt enable 
                                                                ;register
 270                         
 271  000000                                 EXTERN   TIM1_SR1.w    ; TIM1 Status register 1
 272                         
 273  000000                                 EXTERN   TIM1_SR2.w    ; TIM1 Status register 2
 274                         
 275  000000                                 EXTERN   TIM1_EGR.w    ; TIM1 Event Generation 
                                                                ;register
 276                         
 277  000000                                 EXTERN   TIM1_CCMR1.w  ; TIM1 Capture/Compare mode 
                                                                ;register 1
 278                         
 279  000000                                 EXTERN   TIM1_CCMR2.w  ; TIM1 Capture/Compare mode 
                                                                ;register 2
 280                         
 281  000000                                 EXTERN   TIM1_CCMR3.w  ; TIM1 Capture/Compare mode 
                                                                ;register 3
 282                         
 283  000000                                 EXTERN   TIM1_CCMR4.w  ; TIM1 Capture/Compare mode 
                                                                ;register 4
 284                         
 285  000000                                 EXTERN   TIM1_CCER1.w  ; TIM1 Capture/Compare enable 
                                                                ;register 1
 286                         
 287  000000                                 EXTERN   TIM1_CCER2.w  ; TIM1 Capture/Compare enable 
                                                                ;register 2
 288                         
 289  000000                                 EXTERN   TIM1_CNTRH.w  ; Data bits High
 290                         
 291  000000                                 EXTERN   TIM1_CNTRL.w  ; Data bits Low
 292                         
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 8  Assembler
                                               e:\stm8s\elevator\request.asm

 293  000000                                 EXTERN   TIM1_PSCRH.w  ; Data bits High
 294                         
 295  000000                                 EXTERN   TIM1_PSCRL.w  ; Data bits Low
 296                         
 297  000000                                 EXTERN   TIM1_ARRH.w   ; Data bits High
 298                         
 299  000000                                 EXTERN   TIM1_ARRL.w   ; Data bits Low
 300                         
 301  000000                                 EXTERN   TIM1_RCR.w    ; TIM1 Repetition counter 
                                                                ;register
 302                         
 303  000000                                 EXTERN   TIM1_CCR1H.w  ; Data bits High
 304                         
 305  000000                                 EXTERN   TIM1_CCR1L.w  ; Data bits Low
 306                         
 307  000000                                 EXTERN   TIM1_CCR2H.w  ; Data bits High
 308                         
 309  000000                                 EXTERN   TIM1_CCR2L.w  ; Data bits Low
 310                         
 311  000000                                 EXTERN   TIM1_CCR3H.w  ; Data bits High
 312                         
 313  000000                                 EXTERN   TIM1_CCR3L.w  ; Data bits Low
 314                         
 315  000000                                 EXTERN   TIM1_CCR4H.w  ; Data bits High
 316                         
 317  000000                                 EXTERN   TIM1_CCR4L.w  ; Data bits Low
 318                         
 319  000000                                 EXTERN   TIM1_BKR.w    ; TIM1 Break register
 320                         
 321  000000                                 EXTERN   TIM1_DTR.w    ; TIM1 Dead-time register
 322                         
 323  000000                                 EXTERN   TIM1_OISR.w   ; TIM1 Output idle state 
                                                                ;register
 324                         
 325                         ; 16-Bit Timer 2 (TIM2)
 326                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 327                         
 328  000000                                 EXTERN   TIM2_CR1.w    ; TIM2 Control register 1
 329                         
 330  000000                                 EXTERN   TIM2_IER.w    ; TIM2 Interrupt enable 
                                                                ;register
 331                         
 332  000000                                 EXTERN   TIM2_SR1.w    ; TIM2 Status register 1
 333                         
 334  000000                                 EXTERN   TIM2_SR2.w    ; TIM2 Status register 2
 335                         
 336  000000                                 EXTERN   TIM2_EGR.w    ; TIM2 Event Generation 
                                                                ;register
 337                         
 338  000000                                 EXTERN   TIM2_CCMR1.w  ; TIM2 Capture/Compare mode 
                                                                ;register 1
 339                         
 340  000000                                 EXTERN   TIM2_CCMR2.w  ; TIM2 Capture/Compare mode 
                                                                ;register 2
 341                         
 342  000000                                 EXTERN   TIM2_CCMR3.w  ; TIM2 Capture/Compare mode 
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 9  Assembler
                                               e:\stm8s\elevator\request.asm

                                                                ;register 3
 343                         
 344  000000                                 EXTERN   TIM2_CCER1.w  ; TIM2 Capture/Compare enable 
                                                                ;register 1
 345                         
 346  000000                                 EXTERN   TIM2_CCER2.w  ; TIM2 Capture/Compare enable 
                                                                ;register 2
 347                         
 348  000000                                 EXTERN   TIM2_CNTRH.w  ; Data bits High
 349                         
 350  000000                                 EXTERN   TIM2_CNTRL.w  ; Data bits Low
 351                         
 352  000000                                 EXTERN   TIM2_PSCR.w   ; TIM2 Prescaler register
 353                         
 354  000000                                 EXTERN   TIM2_ARRH.w   ; Data bits High
 355                         
 356  000000                                 EXTERN   TIM2_ARRL.w   ; Data bits Low
 357                         
 358  000000                                 EXTERN   TIM2_CCR1H.w  ; Data bits High
 359                         
 360  000000                                 EXTERN   TIM2_CCR1L.w  ; Data bits Low
 361                         
 362  000000                                 EXTERN   TIM2_CCR2H.w  ; Data bits High
 363                         
 364  000000                                 EXTERN   TIM2_CCR2L.w  ; Data bits Low
 365                         
 366  000000                                 EXTERN   TIM2_CCR3H.w  ; Data bits High
 367                         
 368  000000                                 EXTERN   TIM2_CCR3L.w  ; Data bits Low
 369                         
 370                         ; 16-Bit Timer 3 (TIM3)
 371                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 372                         
 373  000000                                 EXTERN   TIM3_CR1.w    ; TIM3 Control register 1
 374                         
 375  000000                                 EXTERN   TIM3_IER.w    ; TIM3 Interrupt enable 
                                                                ;register
 376                         
 377  000000                                 EXTERN   TIM3_SR1.w    ; TIM3 Status register 1
 378                         
 379  000000                                 EXTERN   TIM3_SR2.w    ; TIM3 Status register 2
 380                         
 381  000000                                 EXTERN   TIM3_EGR.w    ; TIM3 Event Generation 
                                                                ;register
 382                         
 383  000000                                 EXTERN   TIM3_CCMR1.w  ; TIM3 Capture/Compare mode 
                                                                ;register 1
 384                         
 385  000000                                 EXTERN   TIM3_CCMR2.w  ; TIM3 Capture/Compare mode 
                                                                ;register 2
 386                         
 387  000000                                 EXTERN   TIM3_CCER1.w  ; TIM3 Capture/Compare enable 
                                                                ;register 1
 388                         
 389  000000                                 EXTERN   TIM3_CNTRH.w  ; Data bits High
 390                         
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 10  Assembler
                                               e:\stm8s\elevator\request.asm

 391  000000                                 EXTERN   TIM3_CNTRL.w  ; Data bits Low
 392                         
 393  000000                                 EXTERN   TIM3_PSCR.w   ; TIM3 Prescaler register
 394                         
 395  000000                                 EXTERN   TIM3_ARRH.w   ; Data bits High
 396                         
 397  000000                                 EXTERN   TIM3_ARRL.w   ; Data bits Low
 398                         
 399  000000                                 EXTERN   TIM3_CCR1H.w  ; Data bits High
 400                         
 401  000000                                 EXTERN   TIM3_CCR1L.w  ; Data bits Low
 402                         
 403  000000                                 EXTERN   TIM3_CCR2H.w  ; Data bits High
 404                         
 405  000000                                 EXTERN   TIM3_CCR2L.w  ; Data bits Low
 406                         
 407                         ; 8-Bit  Timer 4 (TIM4)
 408                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 409                         
 410  000000                                 EXTERN   TIM4_CR1.w    ; TIM4 Control register 1
 411                         
 412  000000                                 EXTERN   TIM4_IER.w    ; TIM4 Interrupt enable 
                                                                ;register
 413                         
 414  000000                                 EXTERN   TIM4_SR.w     ; TIM4 Status register
 415                         
 416  000000                                 EXTERN   TIM4_EGR.w    ; TIM4 Event Generation 
                                                                ;register
 417                         
 418  000000                                 EXTERN   TIM4_CNTR.w   ; TIM4 Counter
 419                         
 420  000000                                 EXTERN   TIM4_PSCR.w   ; TIM4 Prescaler register
 421                         
 422  000000                                 EXTERN   TIM4_ARR.w    ; TIM4 Auto-reload register
 423                         
 424                         ; 10-Bit A/D Converter (ADC1)
 425                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 426                         
 427  000000                                 EXTERN   ADC_DB0RH.w   ; Data Buffer register 0 High
 428                         
 429  000000                                 EXTERN   ADC_DB0RL.w   ; Data Buffer register 0 Low
 430                         
 431  000000                                 EXTERN   ADC_DB1RH.w   ; Data Buffer register 1 High
 432                         
 433  000000                                 EXTERN   ADC_DB1RL.w   ; Data Buffer register 1 Low
 434                         
 435  000000                                 EXTERN   ADC_DB2RH.w   ; Data Buffer register 2 High
 436                         
 437  000000                                 EXTERN   ADC_DB2RL.w   ; Data Buffer register 2 Low
 438                         
 439  000000                                 EXTERN   ADC_DB3RH.w   ; Data Buffer register 3 High
 440                         
 441  000000                                 EXTERN   ADC_DB3RL.w   ; Data Buffer register 3 Low
 442                         
 443  000000                                 EXTERN   ADC_DB4RH.w   ; Data Buffer register 4 High
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 11  Assembler
                                               e:\stm8s\elevator\request.asm

 444                         
 445  000000                                 EXTERN   ADC_DB4RL.w   ; Data Buffer register 4 Low
 446                         
 447  000000                                 EXTERN   ADC_DB5RH.w   ; Data Buffer register 5 High
 448                         
 449  000000                                 EXTERN   ADC_DB5RL.w   ; Data Buffer register 5 Low
 450                         
 451  000000                                 EXTERN   ADC_DB6RH.w   ; Data Buffer register 6 High
 452                         
 453  000000                                 EXTERN   ADC_DB6RL.w   ; Data Buffer register 6 Low
 454                         
 455  000000                                 EXTERN   ADC_DB7RH.w   ; Data Buffer register 7 High
 456                         
 457  000000                                 EXTERN   ADC_DB7RL.w   ; Data Buffer register 7 Low
 458                         
 459  000000                                 EXTERN   ADC_DB8RH.w   ; Data Buffer register 8 High
 460                         
 461  000000                                 EXTERN   ADC_DB8RL.w   ; Data Buffer register 8 Low
 462                         
 463  000000                                 EXTERN   ADC_DB9RH.w   ; Data Buffer register 9 High
 464                         
 465  000000                                 EXTERN   ADC_DB9RL.w   ; Data Buffer register 9 Low
 466                         
 467  000000                                 EXTERN   ADC_CSR.w     ; ADC Control/Status Register
 468                         
 469  000000                                 EXTERN   ADC_CR1.w     ; ADC Configuration Register 1
 470                         
 471  000000                                 EXTERN   ADC_CR2.w     ; ADC Configuration Register 2
 472                         
 473  000000                                 EXTERN   ADC_CR3.w     ; ADC Configuration Register 3
 474                         
 475  000000                                 EXTERN   ADC_DRH.w     ; Data bits High
 476                         
 477  000000                                 EXTERN   ADC_DRL.w     ; Data bits Low
 478                         
 479  000000                                 EXTERN   ADC_TDRH.w    ; Schmitt trigger disable High
 480                         
 481  000000                                 EXTERN   ADC_TDRL.w    ; Schmitt trigger disable Low
 482                         
 483  000000                                 EXTERN   ADC_HTRH.w    ; High Threshold Register High
 484                         
 485  000000                                 EXTERN   ADC_HTRL.w    ; High Threshold Register Low
 486                         
 487  000000                                 EXTERN   ADC_LTRH.w    ; Low Threshold Register High
 488                         
 489  000000                                 EXTERN   ADC_LTRL.w    ; Low Threshold Register Low
 490                         
 491  000000                                 EXTERN   ADC_AWSRH.w   ; Analog Watchdog Status 
                                                                ;register High
 492                         
 493  000000                                 EXTERN   ADC_AWSRL.w   ; Analog Watchdog Status 
                                                                ;register Low
 494                         
 495  000000                                 EXTERN   ADC_AWCRH.w   ; Analog Watchdog Control 
                                                                ;register High
 496                         
 497  000000                                 EXTERN   ADC_AWCRL.w   ; Analog Watchdog Control 
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 12  Assembler
                                               e:\stm8s\elevator\request.asm

                                                                ;register Low
 498                         
 499                         ;  Global configuration register (CFG)
 500                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 501                         
 502  000000                                 EXTERN   CFG_GCR.w     ; CFG Global configuration 
                                                                ;register
 503                         
 504                         ; Interrupt Software Priority Register (ITC)
 505                         ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                               ;;;;;;
 506                         
 507  000000                                 EXTERN   ITC_SPR1.w    ; Interrupt Software priority 
                                                                ;register 1
 508                         
 509  000000                                 EXTERN   ITC_SPR2.w    ; Interrupt Software priority 
                                                                ;register 2
 510                         
 511  000000                                 EXTERN   ITC_SPR3.w    ; Interrupt Software priority 
                                                                ;register 3
 512                         
 513  000000                                 EXTERN   ITC_SPR4.w    ; Interrupt Software priority 
                                                                ;register 4
 514                         
 515  000000                                 EXTERN   ITC_SPR5.w    ; Interrupt Software priority 
                                                                ;register 5
 516                         
 517  000000                                 EXTERN   ITC_SPR6.w    ; Interrupt Software priority 
                                                                ;register 6
 518                         
 519  000000                                 EXTERN   ITC_SPR7.w    ; Interrupt Software priority 
                                                                ;register 7
 520                         
 521  000000                                 #endif                 ; __STM8S105K__
<END_OF_INCLUSION>
   6                                   
   7  000000                                 #ENDIF   
   8                         
   9                         
<END_OF_INCLUSION>
  33                         
  34                         
  35  000000                                 #define  MOVING_TIME 2
  36  000000                                 #define  CLOSE_TIME 10
  37  000000                                 #define  OPEN_TIME 10
  38                                                          ; #define BEEP_TIME 3
  39                         
  40                         
  41  000000                                 #ENDIF   
  42                                   
  43                         
  44  000000                                 extern   B_FLOOR.b
  45  000000                                 extern   B_STATUS.b
  46  000000                                 extern   B_DIRECTION.b
  47                         
  48  000000                                 extern   W_CUR_TARGET_PTR.b
  49  000000                                 extern   W_NEW_PTR.b
  50                         
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 13  Assembler
                                               e:\stm8s\elevator\request.asm

  51  000000                                 extern   FLOOR_TOP.w
  52  000000                                 extern   FLOOR_BOTTOM.w
  53                                   
  54  000000                                 extern   TARGET_QUEUE_BOTTOM.w
  55                         
  56                         
  57  000000                                 extern   TEMP_TARGET_FLOOR_BUTTOM.b
  58  000000                                 extern   TEMP_TARGET_FLOOR_TOP.b
  59                         
  60                                   
  61                                   
  62  000000                                 extern   W_TIMER3_HANDLER.b
  63  000000                                 extern   B_TIMER3_INT_COUNTER.b
<END_OF_INCLUSION>
   6                         
   7  000000                                 #ENDIF   
   8                         
   9                                                          ; void PutNewTarget(const A 
                                                                ;opa_type, const X floor){}
  10  000000                                 extern   PutNewTarget.w
  11                         
  12                                                          ; A CheckQueue(const X 
                                                                ;target_floor){}
  13  000000                                 extern   CheckQueue.w
  14                         
  15  000000                                 extern   IsQueueFull.w
  16  000000                                 extern   IsQueueEmpty.w
  17                         
  18                                                          ; X IncRotatePointer(X pointer)
  19  000000                                 extern   IncRotatePointer.w
  20                                                          ; X DecRotatePointer(X pointer)
  21  000000                                 extern   DecRotatePointer
  22                         
  23                         
  24  000000                                 extern   GetNextTarget.w
  25                         
  26                                   
  27  000000                                 extern   GoUp.w
  28  000000                                 extern   GoDown.w
  29  000000                                 extern   GoIdle.w
  30  000000                                 extern   OpenDoor.w
  31  000000                                 extern   CloseDoor.w
  32                         
  33  000000                                 extern   LED_Refresh.w
<END_OF_INCLUSION>
   4                                   
   5                                   segment  'rom'
   6                         
   7  000000                                 INTEL    
   8                         
   9                         
  10                         ; ---------------------------------
  11                         ; name  : void Request(const A opa_type, const X src_floor)
  12                         ; params: A: operation type => {REQ_NULL, REQ_DOWN, REQ_UP, 
                               ;REQ_UP_DOWN}
  13                         ;         X: source floor   => {floor=0~7}
  14                         ;
  15                         ; return: 
  16                         ; =================================
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 14  Assembler
                                               e:\stm8s\elevator\request.asm

  17                         ; void Request(const A opa_type, const X src_floor)
  18                         ; {
  19                         ;	if(CheckQueue(A, X) == False){
  20                         ; 		PutNewTarget()
  21                         ;	}
  22                         ;
  23                         ;	
  24                         ; }
  25                         ; ---------------------------------
  26                         .Request.w  
  27  000000   8A                            push     cc
  28  000001   88                            push     A
  29  000002   89                            pushw    X
  30                         Request_start:  
  31                                   
  32  000003   88                            push     A
  33  000004 X CD0000                        call     IsQueueFull
  34  000007   A101                          cp       A, #1
  35  000009   84                            pop      A
  36  00000A R 2719                          jreq     Request_exit
  37                         
  38                                                          ; if(IsQueueFull() == False){
  39                                                          ; 	request_floor_addr = 
                                                                ;&bottom_floor + request_floor -
                                                                ; 1
  40                                                          ; 	Y = request_floor_addr
  41                         
  42  00000C   5A                            decw     X
  43  00000D   89                            pushw    X
  44  00000E X 90AE0000                      ldw      Y, #FLOOR_BOTTOM
  45  000012   72F901                        addw     Y, (1,SP)
  46  000015   85                            popw     X
  47                         
  48                                                          ; 	*request_floor_addr = 
                                                                ;opa_type | *request_floor_addr
  49  000016   90FA                          or       A, (Y)
  50  000018   90F7                          ld       (Y), A
  51                         
  52  00001A X B600                          ld       A, B_STATUS
  53  00001C   A100                          cp       A, #0
  54  00001E R 2605                          jrne     Request_exit
  55                         Request_launch:  
  56  000020   85                            popw     X
  57  000021 R CD0000                        call     CheckLaunch
  58  000024   89                            pushw    X
  59                         Request_exit:  
  60  000025   85                            popw     X
  61  000026   84                            pop      A
  62  000027   86                            pop      cc
  63  000028   81                            ret      
  64                         
  65                         
  66                         ; ---------------------------------
  67                         ; name  : void CheckLaunch(const X src_floor)
  68                         ; params: X: request floor
  69                         ;
  70                         ; return: 
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 15  Assembler
                                               e:\stm8s\elevator\request.asm

  71                         ; =================================
  72                         ; void CheckLaunch(const X src_floor)
  73                         ; {	
  74                         ; }
  75                         ; ---------------------------------
  76                         .CheckLaunch.w  
  77  000029   8A                            push     cc
  78  00002A   88                            push     A
  79  00002B   9089                          pushw    Y
  80  00002D   89                            pushw    X
  81                         CheckLaunch_start:  
  82  00002E   905F                          clrw     Y
  83  000030 X B600                          ld       A, B_FLOOR
  84  000032   9097                          ld       YL, A
  85  000034   9089                          pushw    Y
  86  000036   1301                          cpw      X, (1,SP)
  87  000038   9085                          popw     Y
  88  00003A R 2605                          jrne     CheckLaunch_direction
  89  00003C X CD0000                        call     OpenDoor
  90  00003F R 2017                          jra      CheckLaunch_exit
  91                         CheckLaunch_direction:  
  92  000041 R 2B09                          jrmi     CheckLaunch_godown
  93                         CheckLaunch_goup:  
  94  000043 X CD0000                        call     GoUp
  95  000046 X 35020000                      mov      B_DIRECTION, #00000010B
  96  00004A R 2007                          jra      CheckLaunch_putnew_exit
  97                         CheckLaunch_godown:  
  98  00004C X CD0000                        call     GoDown
  99  00004F X 35010000                      mov      B_DIRECTION, #00000001B
 100                         CheckLaunch_putnew_exit:  
 101  000053   85                            popw     X
 102                         
 103  000054 X CD0000                        call     PutNewTarget
 104  000057   89                            pushw    X
 105                         CheckLaunch_exit:  
 106  000058   85                            popw     X
 107  000059   9085                          popw     Y
 108  00005B   84                            pop      A
 109  00005C   86                            pop      cc
 110  00005D   81                            ret      
 111                         
 112                         ; ---------------------------------
 113                         ; name  : void GoCurrentTarget()
 114                         ; params: X: request floor
 115                         ;
 116                         ; return: 
 117                         ; =================================
 118                         ; void GoCurrentTarget()
 119                         ; {	
 120                         ; }
 121                         ; ---------------------------------
 122                         .GoCurrentTarget.w  
 123  00005E   8A                            push     cc
 124  00005F   88                            push     A
 125  000060   9089                          pushw    Y
 126  000062   89                            pushw    X
 127                         GoCurrentTarget_start:  
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 16  Assembler
                                               e:\stm8s\elevator\request.asm

 128  000063 X BE00                          ldw      X, W_CUR_TARGET_PTR
 129  000065   F6                            ld       A, (X)
 130  000066   A100                          cp       A, #0
 131  000068 R 260A                          jrne     GoCurrentTarget_determine_dire     
 132                         GoCurrentTarget_is_target_empt  :        
 133  00006A X CD0000                        call     GetNextTarget
 134  00006D   A100                          cp       A, #0
 135  00006F R 2715                          jreq     GoCurrentTarget_goidle_determi 
 136  000071 R CD0000                        call     GoNextTarget
 137                         GoCurrentTarget_determine_dire  :        
 138  000074   5F                            clrw     X
 139  000075   97                            ld       XL, A
 140                         
 141  000076   905F                          clrw     Y
 142  000078 X B600                          ld       A, B_FLOOR
 143  00007A   9097                          ld       YL, A
 144  00007C   9089                          pushw    Y
 145  00007E   1301                          cpw      X, (1,SP)
 146  000080   9085                          popw     Y
 147                         ; 	; jrne GoCurrentTarget_direction
 148                         ; 	; call OpenDoor
 149                         ; 	; jra GoCurrentTarget_exit
 150                         ; GoCurrentTarget_direction:
 151  000082 R 2B14                          jrmi     GoCurrentTarget_godown
 152  000084 R 2009                          jra      GoCurrentTarget_goup
 153                         GoCurrentTarget_goidle_determi  :        
 154  000086 X CD0000                        call     GoIdle
 155  000089 X 35000000                      mov      B_DIRECTION, #00000000B
 156  00008D R 2010                          jra      GoCurrentTarget_exit
 157                         GoCurrentTarget_goup:  
 158  00008F X CD0000                        call     GoUp
 159  000092 X 35020000                      mov      B_DIRECTION, #00000010B
 160  000096 R 2007                          jra      GoCurrentTarget_exit
 161                         GoCurrentTarget_godown:  
 162  000098 X CD0000                        call     GoDown
 163  00009B X 35010000                      mov      B_DIRECTION, #00000001B
 164                         GoCurrentTarget_exit:  
 165  00009F   85                            popw     X
 166  0000A0   9085                          popw     Y
 167  0000A2   84                            pop      A
 168  0000A3   86                            pop      cc
 169  0000A4   81                            ret      
 170                         
 171                         
 172                         ; ---------------------------------
 173                         ; name  : void GoNextTarget()
 174                         ; params: 
 175                         ;
 176                         ; return: 
 177                         ; =================================
 178                         ; void GoNextTarget()
 179                         ; {	
 180                         ; }
 181                         ; ---------------------------------
 182                         .GoNextTarget.w  
 183  0000A5   8A                            push     cc
 184  0000A6   88                            push     A
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 17  Assembler
                                               e:\stm8s\elevator\request.asm

 185  0000A7   89                            pushw    X
 186                         GoNextTarget_start:  
 187                                   
 188  0000A8 X BE00                          ldw      X, W_CUR_TARGET_PTR
 189  0000AA   7F                            clr      (X)
 190                         GoNextTarget_loop:  
 191  0000AB X CD0000                        call     IncRotatePointer
 192  0000AE X B300                          cpw      X, W_NEW_PTR
 193  0000B0 R 2705                          jreq     GoNextTarget_inc_ptr
 194  0000B2   F6                            ld       A, (X)
 195  0000B3   A100                          cp       A, #0
 196  0000B5 R 27F4                          jreq     GoNextTarget_loop
 197                         GoNextTarget_inc_ptr:  
 198  0000B7 X BF00                          ldw      W_CUR_TARGET_PTR, X
 199                         GoNextTarget_exit:  
 200  0000B9   85                            popw     X
 201  0000BA   84                            pop      A
 202  0000BB   86                            pop      cc
 203  0000BC   81                            ret      
 204                         
 205                         
 206                         
 207                         
 208                         
 209                         
 210                         ; ; ---------------------------------
 211                         ; ; name  : void PutAllTempTarget()
 212                         ; ; params: 
 213                         ; ;
 214                         ; ; return: 
 215                         ; ; =================================
 216                         ; ; void PutAllTempTarget()
 217                         ; ; {
 218                         ; ; }
 219                         ; ; ---------------------------------
 220                         ; .PutAllTempTarget.w
 221                         ; 	push cc
 222                         ; 	push A
 223                         ; 	pushw X
 224                         ; PutAllTempTarget_start:
 225                         ; 	ldw X, #MAX_FLOOR
 226                                   
 227                         ; PutAllTempTarget_loop:
 228                         ; 	decw X
 229                         ;     jreq PutAllTempTarget_exit
 230                         ; 	ld A, (TEMP_TARGET_FLOOR_BUTTOM,X)
 231                         ; 	cp A, #True
 232                         ; 	jrne PutAllTempTarget_next
 233                         ; PutAllTempTarget_put:
 234                         ; 	incw X
 235                         ; 	call PutTargetFloor
 236                         ; 	decw X
 237                         ; PutAllTempTarget_next:
 238                         ; 	jrne PutAllTempTarget_loop
 239                         ; PutAllTempTarget_exit:
 240                         ; 	popw X
 241                         ; 	pop A
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 18  Assembler
                                               e:\stm8s\elevator\request.asm

 242                         ; 	pop cc
 243                         ;     ret
 244                         
 245                         
 246                         ; ; ---------------------------------
 247                         ; ; name  : A CheckTempTarget(const X floor)
 248                         ; ; params: 
 249                         ; ;
 250                         ; ; return: A
 251                         ; ; =================================
 252                         ; ; A CheckTempTarget()
 253                         ; ; {
 254                         ; ; }
 255                         ; ; ---------------------------------
 256                         ; .CheckTempTarget.w
 257                         ; 	push cc
 258                         ; 	pushw X
 259                         ; CheckTempTarget_start:
 260                                   
 261                         
 262                         ; CheckTempTarget_True:
 263                         
 264                         ; CheckTempTarget_False:
 265                         
 266                         ; CheckTempTarget_exit:
 267                         ; 	popw X
 268                         ; 	pop cc
 269                         ;     ret
 270                         
 271                         ; ; ---------------------------------
 272                         ; ; name  : void SetTempTarget(const X floor)
 273                         ; ; params: 
 274                         ; ;
 275                         ; ; return: 
 276                         ; ; =================================
 277                         ; ; void SetTempTarget(const X floor)
 278                         ; ; {
 279                         ; ; }
 280                         ; ; ---------------------------------
 281                         ; .SetTempTarget.w
 282                         ; 	push cc
 283                         ; 	push A
 284                         ; PutAllTarget_start:
 285                         ;     decw X
 286                         ; 	; ld A, #TEMP_TARGET_FLOOR_BUTTOM
 287                         ; 	ld A, #True
 288                         ; 	ld (TEMP_TARGET_FLOOR_BUTTOM,X), A
 289                         ;     incw X
 290                         ; PutAllTarget_exit:
 291                         ; 	pop A
 292                         ; 	pop cc
 293                         ;     ret
 294                         
 295                         
 296                         ; ; ---------------------------------
 297                         ; ; name  : void ClearTempTarget()
 298                         ; ; params: 
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 19  Assembler
                                               e:\stm8s\elevator\request.asm

 299                         ; ;
 300                         ; ; return: 
 301                         ; ; =================================
 302                         ; ; void ClearTempTarget()
 303                         ; ; {
 304                         ; ; }
 305                         ; ; ---------------------------------
 306                         ; .ClearTempTarget.w
 307                         ; 	push cc
 308                         ; 	pushw X
 309                         ; ClearTempTarget_start:
 310                         ; 	ldw X, #TEMP_TARGET_FLOOR_BUTTOM
 311                         ; ClearTempTarget_loop:
 312                         ; 	clr (X)
 313                         ; 	incw X
 314                         ; 	cpw X, #TEMP_TARGET_FLOOR_TOP
 315                         ; 	jrne ClearTempTarget_loop
 316                         ; ClearTempTarget_exit:
 317                         ; 	popw X
 318                         ; 	pop cc
 319                         ;     ret
 320                         
 321                         
 322                         
 323                         
 324                         
 325                         
 326                         ; ---------------------------------
 327                         ; name  : void PutTargetFloor(const X target_floor)
 328                         ; params: X: target_floor     => {floor=0~7}
 329                         ;
 330                         ; return: 
 331                         ; =================================
 332                         ; void PutTargetFloor(const A opa_type, const X floor)
 333                         ; {
 334                         ;	if(IsQueueFull() == False || IsQueueEmpty() == True){
 335                         ;		PutNewTarget(x);
 336                         ;	}
 337                         ; }
 338                         ; ---------------------------------
 339                         .PutTargetFloor.w  
 340  0000BD   8A                            push     cc
 341                         PutTargetFloor_start:  
 342  0000BE X CD0000                        call     IsQueueFull
 343  0000C1   A101                          cp       A, #1
 344  0000C3 R 2711                          jreq     PutTargetFloor_exit
 345                         
 346  0000C5 X CD0000                        call     IsQueueEmpty
 347  0000C8   A101                          cp       A, #1
 348  0000CA R 2707                          jreq     PutTargetFloor_put
 349                         
 350                                                          ; CheckQueue(X)
 351  0000CC X CD0000                        call     CheckQueue
 352  0000CF   A101                          cp       A, #1
 353  0000D1 R 2703                          jreq     PutTargetFloor_exit
 354                         PutTargetFloor_put:  
 355  0000D3 X CD0000                        call     PutNewTarget
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 20  Assembler
                                               e:\stm8s\elevator\request.asm

 356                         PutTargetFloor_exit:  
 357  0000D6   86                            pop      cc
 358  0000D7   81                            ret      
 359                         
 360                         
 361                         
 362                         
 363                         ; ---------------------------------
 364                         ; name  : A GetFloorReq(const X floor)
 365                         ; params: X: floor 				=> {floor=0~MAX_FLOOR}
 366                         ;
 367                         ; return: A: request operation 	=> {REQ_NULL, REQ_DOWN, 
                               ;REQ_UP, REQ_UP_DOWN}
 368                         ; =================================
 369                         ; A GetFloorReq(const X floor)
 370                         ; {
 371                         ; 	request_floor_addr = &bottom_floor + request_floor - 1;
 372                         ; 	return *request_floor_addr;
 373                         ; }
 374                         ; ---------------------------------
 375                         .GetFloorReq.w  
 376  0000D8   8A                            push     cc
 377  0000D9   89                            pushw    X
 378                         GetFloorReq_start:  
 379  0000DA   5A                            decw     X
 380  0000DB X D60000                        ld       A, (FLOOR_BOTTOM,X)
 381                         GetFloorReq_exit:  
 382  0000DE   85                            popw     X
 383  0000DF   86                            pop      cc
 384  0000E0   81                            ret      
 385                         
 386                         
 387                         ; ---------------------------------	!!!! error prone !!!!! - <
                               ; it may change floor request, clear when match >
 388                         ; name  : A CheckCurrentFloorReq()
 389                         ; params: 
 390                         ;
 391                         ; return: A: check if request of current floor matchs 
                               ;direction	=> {True, False}
 392                         ; =================================
 393                         ; A CheckCurrentFloorReq()
 394                         ; {
 395                         ; }
 396                         ; --------------------------------- 
 397                         .CheckCurrentFloorReq.w  
 398  0000E1   8A                            push     cc
 399  0000E2   89                            pushw    X
 400                         CheckCurrentFloorReq_start:  
 401  0000E3 X B600                          ld       A, B_FLOOR
 402  0000E5   5F                            clrw     X
 403  0000E6   97                            ld       XL, A
 404  0000E7 R CD0000                        call     GetFloorReq
 405  0000EA   88                            push     A
 406  0000EB X B400                          and      A, B_DIRECTION
 407  0000ED   84                            pop      A
 408  0000EE R 2710                          jreq     CheckCurrentFloorReq_False
 409                         CheckCurrentFloorReq_True:  
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 21  Assembler
                                               e:\stm8s\elevator\request.asm

 410  0000F0   88                            push     A
 411  0000F1 X B600                          ld       A, B_DIRECTION
 412  0000F3   A8FF                          xor      A, #0FFH
 413  0000F5   1401                          and      A, (1,SP)
 414  0000F7   5A                            decw     X
 415  0000F8 X D70000                        ld       (FLOOR_BOTTOM,X), A
 416  0000FB   84                            pop      A
 417  0000FC   A601                          ld       A, #1
 418  0000FE R 2002                          jra      CheckCurrentFloorReq_exit
 419                         CheckCurrentFloorReq_False:  
 420  000100   A600                          ld       A, #0
 421                         CheckCurrentFloorReq_exit:  
 422  000102   85                            popw     X
 423  000103   86                            pop      cc
 424  000104   81                            ret      
 425                         
 426                         
 427                         ; ---------------------------------	!!!! error prone !!!!! - <
                               ; it may change floor request, clear when match >
 428                         ; name  : A CheckCurrentFloorTarget()
 429                         ; params: 
 430                         ;
 431                         ; return: A: check if there are targets matching current 
                               ;direction. mask when match => {True, False}
 432                         ; =================================
 433                         ; A CheckCurrentFloorTarget()
 434                         ; {
 435                         ; }
 436                         ; --------------------------------- 
 437                         .CheckCurrentFloorTarget.w  
 438  000105   8A                            push     cc
 439  000106   89                            pushw    X
 440                         CheckCurrentFloorTarget_start:  
 441  000107 X BE00                          ldw      X, W_CUR_TARGET_PTR
 442  000109 X B600                          ld       A, B_FLOOR
 443  00010B   F1                            cp       A, (X)
 444  00010C R 2711                          jreq     CheckCurrentFloorTarget_True_o   
 445                         CheckCurrentFloorTarget_loop:  
 446  00010E   F1                            cp       A, (X)
 447  00010F R 270B                          jreq     CheckCurrentFloorTarget_True
 448  000111 X CD0000                        call     IncRotatePointer
 449  000114 X B300                          cpw      X, W_NEW_PTR
 450  000116 R 26F6                          jrne     CheckCurrentFloorTarget_loop
 451                         CheckCurrentFloorTarget_False:  
 452  000118   A600                          ld       A, #0
 453  00011A R 2005                          jra      CheckCurrentFloorTarget_exit
 454                         CheckCurrentFloorTarget_True:  
 455  00011C   A600                          ld       A, #0
 456  00011E   F7                            ld       (X), A
 457                         CheckCurrentFloorTarget_True_o  :        
 458  00011F   A601                          ld       A, #1
 459                         CheckCurrentFloorTarget_exit:  
 460  000121   85                            popw     X
 461  000122   86                            pop      cc
 462  000123   81                            ret      
 463                         
 464                         
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 22  Assembler
                                               e:\stm8s\elevator\request.asm

 465                         ; ---------------------------------
 466                         ; name  : A IsNextTargetDirection()
 467                         ; params: 
 468                         ;
 469                         ; return: A: check if next target floor is in current 
                               ;direction => {True, False}
 470                         ; =================================
 471                         ; A IsNextTargetDirection()
 472                         ; {
 473                         ; }
 474                         ; --------------------------------- 
 475                         .IsNextTargetDirection.w  
 476  000124   8A                            push     cc
 477  000125   89                            pushw    X
 478                         IsNextTargetDirection_start:  
 479                         
 480  000126 X CD0000                        call     GetNextTarget
 481  000129   5F                            clrw     X
 482  00012A   97                            ld       XL, A
 483                                                          ; X <= Next Target
 484                         
 485  00012B X 92C600                        ld       A, [W_CUR_TARGET_PTR.w]
 486  00012E   88                            push     A
 487  00012F   4B00                          push     #00
 488                         
 489  000131 X B600                          ld       A, B_DIRECTION
 490  000133   A102                          cp       A, #00000010B
 491  000135 R 2704                          jreq     IsNextTargetDirection_up
 492                         IsNextTargetDirection_down:  
 493  000137   1301                          cpw      X, (1,SP)
 494  000139 R 2B04                          jrmi     IsNextTargetDirection_True
 495                         IsNextTargetDirection_up:  
 496  00013B   1301                          cpw      X, (1,SP)
 497  00013D R 2B04                          jrmi     IsNextTargetDirection_False
 498                                   
 499                         IsNextTargetDirection_True:  
 500  00013F   A601                          ld       A, #1
 501  000141 R 2002                          jra      IsNextTargetDirection_exit
 502                         IsNextTargetDirection_False:  
 503  000143   A600                          ld       A, #0
 504                         IsNextTargetDirection_exit:  
 505  000145   85                            popw     X
 506                         
 507  000146   85                            popw     X
 508  000147   86                            pop      cc
 509  000148   81                            ret      
 510                         
 511                         
 512                         
 513                         
 514                         ; ---------------------------------
 515                         ; name  : X GetNextDirTargetPointer()
 516                         ; params: 
 517                         ;
 518                         ; return: X: next same direction target pointer
 519                         ; =================================
 520                         ; X GetNextDirTargetPointer()
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 23  Assembler
                                               e:\stm8s\elevator\request.asm

 521                         ; {
 522                         ; }
 523                         ; --------------------------------- 
 524                         .GetNextDirTargetPointer.w  
 525  000149   8A                            push     cc
 526  00014A   88                            push     A
 527                         GetNextDirTargetPointer_start:  
 528                                                          ; call GetNextTarget
 529                                                          ; X <= Next Target
 530  00014B X B600                          ld       A, B_FLOOR
 531  00014D   88                            push     A
 532  00014E   4B00                          push     #00
 533                         
 534  000150 X BE00                          ldw      X, W_CUR_TARGET_PTR
 535                         
 536                         
 537  000152 X B600                          ld       A, B_DIRECTION
 538  000154   A101                          cp       A, #00000001B
 539  000156 R 2710                          jreq     GetNextDirTargetPointer_down_l   
 540                                   
 541                         GetNextDirTargetPointer_up_loo  :        
 542  000158 X CD0000                        call     IncRotatePointer
 543  00015B X B300                          cpw      X, W_NEW_PTR
 544  00015D R 2719                          jreq     GetNextDirTargetPointer_invali 
 545  00015F   89                            pushw    X
 546  000160   FE                            ldw      X, (X)
 547  000161   1301                          cpw      X, (1,SP)
 548  000163   85                            popw     X
 549  000164 R 2BF2                          jrmi     GetNextDirTargetPointer_up_loo 
 550  000166 R 2013                          jra      GetNextDirTargetPointer_target
 551                         
 552                         
 553                         GetNextDirTargetPointer_down_l  :        
 554  000168 X CD0000                        call     IncRotatePointer
 555  00016B X B300                          cpw      X, W_NEW_PTR
 556  00016D R 2709                          jreq     GetNextDirTargetPointer_invali 
 557  00016F   89                            pushw    X
 558  000170   FE                            ldw      X, (X)
 559  000171   1301                          cpw      X, (1,SP)
 560  000173   85                            popw     X
 561  000174 R 2AF2                          jrpl     GetNextDirTargetPointer_down_l   
 562  000176 R 2003                          jra      GetNextDirTargetPointer_target
 563                         GetNextDirTargetPointer_invali  :        
 564  000178   AE0000                        ldw      X, #0
 565                         GetNextDirTargetPointer_target:  
 566                         
 567                         GetNextDirTargetPointer_exit:  
 568                                                          ; pop temp word
 569  00017B   84                            pop      A
 570  00017C   84                            pop      A
 571                         
 572  00017D   84                            pop      A
 573  00017E   86                            pop      cc
 574  00017F   81                            ret      
 575                         
 576                         
 577                         
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 24  Assembler
                                               e:\stm8s\elevator\request.asm

 578                         
 579                         
 580                         
 581                         
 582                         
 583                         ; ; ---------------------------------
 584                         ; ; name  : A IsTargetFloor(const X floor)
 585                         ; ; params: 
 586                         ; ;
 587                         ; ; return: A: if current is a target => {True, False}
 588                         ; ; =================================
 589                         ; ; A IsTargetFloor(const X floor)
 590                         ; ; {
 591                         ; ; }
 592                         ; ; --------------------------------- 
 593                         ; .IsTargetFloor.w
 594                         ; 	push cc
 595                         ; 	pushw X
 596                         ; IsTargetFloor_start:
 597                         ; 	ldw X, W_CUR_TARGET_PTR
 598                         ; 	ld A, B_FLOOR
 599                         
 600                         ; IsTargetFloor_loop:
 601                         ; 	cp A, (X)
 602                         ; 	jreq IsTargetFloor_True
 603                         ; 	call IncRotatePointer
 604                         ; 	cpw X, W_NEW_PTR
 605                         ; 	jrne IsTargetFloor_loop
 606                         ; IsTargetFloor_False:
 607                         ; 	ld A, #False
 608                         ; 	jra IsTargetFloor_exit
 609                         ; IsTargetFloor_True:
 610                         ; 	ld A, #True
 611                         
 612                         ; IsTargetFloor_exit:
 613                         ; 	popw X
 614                         ; 	pop cc
 615                         ; 	ret
 616                         
 617                         
 618                         
 619                         ; ---------------------------------
 620                         ; name  : A IsReached()
 621                         ; params: 
 622                         ;
 623                         ; return: A: request reached ? => {True, False}
 624                         ; =================================
 625                         ; A IsReached()
 626                         ; {
 627                         ; }
 628                         ; ---------------------------------
 629                         .IsReached.w  
 630  000180   8A                            push     cc
 631                                                          ; pushw X
 632                         IsReached_start:  
 633                                                          ; ldw X, W_CUR_TARGET_PTR
 634                                                          ; call DecRotatePointer
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 25  Assembler
                                               e:\stm8s\elevator\request.asm

 635  000181 X 92C600                        ld       A, [W_CUR_TARGET_PTR.w]
 636  000184 X B100                          cp       A, B_FLOOR
 637  000186 R 2604                          jrne     IsReached_False
 638                         IsReached_True:  
 639  000188   A601                          ld       A, #1
 640  00018A R 2002                          jra      IsReached_exit
 641                         IsReached_False:  
 642  00018C   A600                          ld       A, #0
 643                         IsReached_exit:  
 644                                                          ; popw X
 645  00018E   86                            pop      cc
 646  00018F   81                            ret      
 647                         
 648                         
 649                         
 650                         ; ---------------------------------
 651                         ; name  : A IsAllReqDone()
 652                         ; params: 
 653                         ;
 654                         ; return: A: 
 655                         ; =================================
 656                         ; A IsAllReqDone()
 657                         ; {
 658                         ; }
 659                         ; ---------------------------------
 660                         .IsAllReqDone.w  
 661  000190   8A                            push     cc
 662  000191   89                            pushw    X
 663                         IsAllReqDone_start:  
 664  000192   AE0008                        ldw      X, #8
 665                         IsAllReqDone_loop:  
 666  000195 R CD0000                        call     GetFloorReq
 667  000198   A100                          cp       A, #0
 668  00019A R 2607                          jrne     IsAllReqDone_False
 669  00019C   5A                            decw     X
 670  00019D R 26F6                          jrne     IsAllReqDone_loop
 671                         IsAllReqDone_True:  
 672  00019F   A601                          ld       A, #1
 673  0001A1 R 2002                          jra      IsAllReqDone_exit
 674                         IsAllReqDone_False:  
 675  0001A3   A600                          ld       A, #0
 676                         IsAllReqDone_exit:  
 677  0001A5   85                            popw     X
 678  0001A6   86                            pop      cc
 679  0001A7   81                            ret      
 680                         
 681                         
 682                         
 683                         ; ---------------------------------
 684                         ; name  : A GetNearFloorReq()
 685                         ; params: 
 686                         ;
 687                         ; return: A: 
 688                         ; =================================
 689                         ; A GetNearFloorReq()
 690                         ; {
 691                         ; }
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 26  Assembler
                                               e:\stm8s\elevator\request.asm

 692                         ; ---------------------------------
 693                         .GetNearFloorReq.w  
 694  0001A8   8A                            push     cc
 695  0001A9   89                            pushw    X
 696                                                          ; pushw Y
 697                         GetNearFloorReq_start:  
 698                         ; 	clrw X
 699                         ; 	ld A, B_FLOOR
 700                         ; 	cp A, #1
 701                         
 702                         ; 	jrne GetNearFloorReq_other_floor
 703                         ; GetNearFloorReq_floor_1:
 704                         ; GetNearFloorReq_floor_1_loop:
 705                         ; 	inc A
 706                         ; 	cp A, #MAX_FLOOR
 707                         ; 	jreq GetNearFloorReq_invalid
 708                         ; 	ld XL, A
 709                         ; 	call GetFloorReq
 710                         ; 	cp A, #REQ_NULL
 711                         ; 	jreq GetNearFloorReq_floor_1_loop
 712                         ; 	jra GetNearFloorReq_return_req
 713                         ; GetNearFloorReq_other_floor:
 714  0001AA   5F                            clrw     X
 715  0001AB   4B00                          push     #0
 716                         GetNearFloorReq_other_floor_lo  :        
 717                         GetNearFloorReq_other_floor_ch  :        
 718  0001AD X B600                          ld       A, B_FLOOR
 719  0001AF   1B01                          add      A, (1,SP)
 720  0001B1   A108                          cp       A, #8
 721  0001B3 R 2B0A                          jrmi     GetNearFloorReq_other_floor_up
 722  0001B5 X B600                          ld       A, B_FLOOR
 723  0001B7   1001                          sub      A, (1,SP)
 724  0001B9   A101                          cp       A, #1
 725  0001BB R 2A02                          jrpl     GetNearFloorReq_other_floor_up
 726  0001BD R 2028                          jra      GetNearFloorReq_invalid
 727                         GetNearFloorReq_other_floor_up:  
 728  0001BF   0C01                          inc      (1,SP)
 729  0001C1 X B600                          ld       A, B_FLOOR
 730  0001C3   1B01                          add      A, (1,SP)
 731  0001C5   A108                          cp       A, #8
 732  0001C7 R 2208                          jrugt    GetNearFloorReq_other_floor_do  
 733  0001C9   97                            ld       XL, A
 734  0001CA R CD0000                        call     GetFloorReq
 735  0001CD   A100                          cp       A, #0
 736  0001CF R 2612                          jrne     GetNearFloorReq_return_req_oth        
 737                         GetNearFloorReq_other_floor_do  :        
 738  0001D1 X B600                          ld       A, B_FLOOR
 739  0001D3   1001                          sub      A, (1,SP)
 740  0001D5   A101                          cp       A, #1
 741  0001D7 R 2BD4                          jrmi     GetNearFloorReq_other_floor_lo  
 742  0001D9   97                            ld       XL, A
 743  0001DA R CD0000                        call     GetFloorReq
 744  0001DD   A100                          cp       A, #0
 745  0001DF R 2602                          jrne     GetNearFloorReq_return_req_oth        
 746  0001E1 R 20CA                          jra      GetNearFloorReq_other_floor_lo  
 747                         
 748                         GetNearFloorReq_return_req_oth  :        
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 27  Assembler
                                               e:\stm8s\elevator\request.asm

 749  0001E3   84                            pop      A
 750                         GetNearFloorReq_return_req:  
 751                                                          ; ld A, #True
 752  0001E4   9F                            ld       A, XL
 753  0001E5 R 2003                          jra      GetNearFloorReq_exit
 754                         GetNearFloorReq_invalid:  
 755  0001E7   84                            pop      A
 756  0001E8   A600                          ld       A, #0
 757                         GetNearFloorReq_exit:  
 758                                                          ; popw Y
 759  0001EA   85                            popw     X
 760  0001EB   86                            pop      cc
 761  0001EC   81                            ret      
 762                         
 763                         
 764                         
 765                         
 766                         
 767                         
 768                         
 769                         
 770                         
 771                         
 772  0001ED                                 end      
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 28  Assembler
                                               e:\stm8s\elevator\request.asm

Symbol Name                       Value     Call       Type  Scope      Rel.  Line  Privacy  Segment   Size  Bytes File

AWU_CSR                           ????????         no  WORD  External   rel    170  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
AWU_APR                           ????????         no  WORD  External   rel    172  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
AWU_TBR                           ????????         no  WORD  External   rel    174  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB0RH                         ????????         no  WORD  External   rel    427  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB0RL                         ????????         no  WORD  External   rel    429  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB1RH                         ????????         no  WORD  External   rel    431  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB1RL                         ????????         no  WORD  External   rel    433  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB2RH                         ????????         no  WORD  External   rel    435  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB2RL                         ????????         no  WORD  External   rel    437  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB3RH                         ????????         no  WORD  External   rel    439  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB3RL                         ????????         no  WORD  External   rel    441  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB4RH                         ????????         no  WORD  External   rel    443  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB4RL                         ????????         no  WORD  External   rel    445  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB5RH                         ????????         no  WORD  External   rel    447  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB5RL                         ????????         no  WORD  External   rel    449  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB6RH                         ????????         no  WORD  External   rel    451  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB6RL                         ????????         no  WORD  External   rel    453  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB7RH                         ????????         no  WORD  External   rel    455  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB7RL                         ????????         no  WORD  External   rel    457  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB8RH                         ????????         no  WORD  External   rel    459  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB8RL                         ????????         no  WORD  External   rel    461  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB9RH                         ????????         no  WORD  External   rel    463  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DB9RL                         ????????         no  WORD  External   rel    465  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_CSR                           ????????         no  WORD  External   rel    467  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_CR1                           ????????         no  WORD  External   rel    469  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_CR2                           ????????         no  WORD  External   rel    471  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_CR3                           ????????         no  WORD  External   rel    473  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DRH                           ????????         no  WORD  External   rel    475  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_DRL                           ????????         no  WORD  External   rel    477  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_TDRH                          ????????         no  WORD  External   rel    479  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_TDRL                          ????????         no  WORD  External   rel    481  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_HTRH                          ????????         no  WORD  External   rel    483  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_HTRL                          ????????         no  WORD  External   rel    485  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_LTRH                          ????????         no  WORD  External   rel    487  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_LTRL                          ????????         no  WORD  External   rel    489  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_AWSRH                         ????????         no  WORD  External   rel    491  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_AWSRL                         ????????         no  WORD  External   rel    493  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_AWCRH                         ????????         no  WORD  External   rel    495  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ADC_AWCRL                         ????????         no  WORD  External   rel    497  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc

BEEP_CSR                          ????????         no  WORD  External   rel    179  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
B_FLOOR                           ????????         no  BYTE  External   rel     44  private  text         0     0  e:\stm8s\elevator\variable.inc
B_STATUS                          ????????         no  BYTE  External   rel     45  private  text         0     0  e:\stm8s\elevator\variable.inc
B_DIRECTION                       ????????         no  BYTE  External   rel     46  private  text         0     0  e:\stm8s\elevator\variable.inc
B_TIMER3_INT_COUNTER              ????????         no  BYTE  External   rel     63  private  text         0     0  e:\stm8s\elevator\variable.inc

CLK_ICKR                          ????????         no  WORD  External   rel    125  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
CLK_ECKR                          ????????         no  WORD  External   rel    127  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
CLK_CMSR                          ????????         no  WORD  External   rel    129  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
CLK_SWR                           ????????         no  WORD  External   rel    131  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
CLK_SWCR                          ????????         no  WORD  External   rel    133  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
CLK_CKDIVR                        ????????         no  WORD  External   rel    135  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
CLK_PCKENR1                       ????????         no  WORD  External   rel    137  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
CLK_CSSR                          ????????         no  WORD  External   rel    139  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
CLK_CCOR                          ????????         no  WORD  External   rel    141  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 29  Assembler
                                               e:\stm8s\elevator\request.asm

CLK_PCKENR2                       ????????         no  WORD  External   rel    143  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
CLK_CANCCR                        ????????         no  WORD  External   rel    145  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
CLK_HSITRIMR                      ????????         no  WORD  External   rel    147  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
CLK_SWIMCCR                       ????????         no  WORD  External   rel    149  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
CFG_GCR                           ????????         no  WORD  External   rel    502  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
CheckQueue                        ????????         no  WORD  External   rel     13  private  text         0     0  e:\stm8s\elevator\request.inc
CloseDoor                         ????????         no  WORD  External   rel     31  private  text         0     0  e:\stm8s\elevator\request.inc
CheckLaunch                           0029         no  WORD  Internal   rel     76  public   text         5     0  -
CheckLaunch_start                     002E         no  WORD  Internal   rel     81  private  text        19     0  -
CheckLaunch_direction                 0041         no  WORD  Internal   rel     91  private  text         2     0  -
CheckLaunch_goup                      0043         no  WORD  Internal   rel     93  private  text         9     0  -
CheckLaunch_godown                    004C         no  WORD  Internal   rel     97  private  text         7     0  -
CheckLaunch_putnew_exit               0053         no  WORD  Internal   rel    100  private  text         5     0  -
CheckLaunch_exit                      0058         no  WORD  Internal   rel    105  private  text         6     0  -
CheckCurrentFloorReq                  00E1         no  WORD  Internal   rel    397  public   text         2     0  -
CheckCurrentFloorReq_start            00E3         no  WORD  Internal   rel    400  private  text        13     0  -
CheckCurrentFloorReq_True             00F0         no  WORD  Internal   rel    409  private  text        16     0  -
CheckCurrentFloorReq_False            0100         no  WORD  Internal   rel    419  private  text         2     0  -
CheckCurrentFloorReq_exit             0102         no  WORD  Internal   rel    421  private  text         3     0  -
CheckCurrentFloorTarget               0105         no  WORD  Internal   rel    437  public   text         2     0  -
CheckCurrentFloorTarget_start         0107         no  WORD  Internal   rel    440  private  text         7     0  -
CheckCurrentFloorTarget_loop          010E         no  WORD  Internal   rel    445  private  text        10     0  -
CheckCurrentFloorTarget_False         0118         no  WORD  Internal   rel    451  private  text         4     0  -
CheckCurrentFloorTarget_True          011C         no  WORD  Internal   rel    454  private  text         3     0  -
CheckCurrentFloorTarget_True_o        011F         no  WORD  Internal   rel    457  private  text         2     0  -
CheckCurrentFloorTarget_exit          0121         no  WORD  Internal   rel    459  private  text         3     0  -

DecRotatePointer                  ????????         no  WORD  External   rel     21  private  text         0     0  e:\stm8s\elevator\request.inc

EXTI_CR1                          ????????         no  WORD  External   rel    113  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
EXTI_CR2                          ????????         no  WORD  External   rel    115  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc

FLASH_CR1                         ????????         no  WORD  External   rel     94  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
FLASH_CR2                         ????????         no  WORD  External   rel     96  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
FLASH_NCR2                        ????????         no  WORD  External   rel     98  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
FLASH_FPR                         ????????         no  WORD  External   rel    100  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
FLASH_NFPR                        ????????         no  WORD  External   rel    102  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
FLASH_IAPSR                       ????????         no  WORD  External   rel    104  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
FLASH_PUKR                        ????????         no  WORD  External   rel    106  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
FLASH_DUKR                        ????????         no  WORD  External   rel    108  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
FLOOR_TOP                         ????????         no  WORD  External   rel     51  private  text         0     0  e:\stm8s\elevator\variable.inc
FLOOR_BOTTOM                      ????????         no  WORD  External   rel     52  private  text         0     0  e:\stm8s\elevator\variable.inc

GetNextTarget                     ????????         no  WORD  External   rel     24  private  text         0     0  e:\stm8s\elevator\request.inc
GoUp                              ????????         no  WORD  External   rel     27  private  text         0     0  e:\stm8s\elevator\request.inc
GoDown                            ????????         no  WORD  External   rel     28  private  text         0     0  e:\stm8s\elevator\request.inc
GoIdle                            ????????         no  WORD  External   rel     29  private  text         0     0  e:\stm8s\elevator\request.inc
GoCurrentTarget                       005E         no  WORD  Internal   rel    122  public   text         5     0  -
GoCurrentTarget_start                 0063         no  WORD  Internal   rel    127  private  text         7     0  -
GoCurrentTarget_is_target_empt        006A         no  WORD  Internal   rel    132  private  text        10     0  -
GoCurrentTarget_determine_dire        0074         no  WORD  Internal   rel    137  private  text        18     0  -
GoCurrentTarget_goidle_determi        0086         no  WORD  Internal   rel    153  private  text         9     0  -
GoCurrentTarget_goup                  008F         no  WORD  Internal   rel    157  private  text         9     0  -
GoCurrentTarget_godown                0098         no  WORD  Internal   rel    161  private  text         7     0  -
GoCurrentTarget_exit                  009F         no  WORD  Internal   rel    164  private  text         6     0  -
GoNextTarget                          00A5         no  WORD  Internal   rel    182  public   text         3     0  -
GoNextTarget_start                    00A8         no  WORD  Internal   rel    186  private  text         3     0  -
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 30  Assembler
                                               e:\stm8s\elevator\request.asm

GoNextTarget_loop                     00AB         no  WORD  Internal   rel    190  private  text        12     0  -
GoNextTarget_inc_ptr                  00B7         no  WORD  Internal   rel    197  private  text         2     0  -
GoNextTarget_exit                     00B9         no  WORD  Internal   rel    199  private  text         4     0  -
GetFloorReq                           00D8         no  WORD  Internal   rel    375  public   text         2     0  -
GetFloorReq_start                     00DA         no  WORD  Internal   rel    378  private  text         4     0  -
GetFloorReq_exit                      00DE         no  WORD  Internal   rel    381  private  text         3     0  -
GetNextDirTargetPointer               0149         no  WORD  Internal   rel    524  public   text         2     0  -
GetNextDirTargetPointer_start         014B         no  WORD  Internal   rel    527  private  text        13     0  -
GetNextDirTargetPointer_up_loo        0158         no  WORD  Internal   rel    541  private  text        16     0  -
GetNextDirTargetPointer_down_l        0168         no  WORD  Internal   rel    553  private  text        16     0  -
GetNextDirTargetPointer_invali        0178         no  WORD  Internal   rel    563  private  text         3     0  -
GetNextDirTargetPointer_target        017B         no  WORD  Internal   rel    565  private  text         5     0  -
GetNextDirTargetPointer_exit          017B         no  WORD  Internal   rel    567  private  text         5     0  -
GetNearFloorReq                       01A8         no  WORD  Internal   rel    693  public   text         2     0  -
GetNearFloorReq_start                 01AA         no  WORD  Internal   rel    697  private  text         3     0  -
GetNearFloorReq_other_floor_lo        01AD         no  WORD  Internal   rel    716  private  text        18     0  -
GetNearFloorReq_other_floor_ch        01AD         no  WORD  Internal   rel    717  private  text        18     0  -
GetNearFloorReq_other_floor_up        01BF         no  WORD  Internal   rel    727  private  text        18     0  -
GetNearFloorReq_other_floor_do        01D1         no  WORD  Internal   rel    737  private  text        18     0  -
GetNearFloorReq_return_req_oth        01E3         no  WORD  Internal   rel    748  private  text         1     0  -
GetNearFloorReq_return_req            01E4         no  WORD  Internal   rel    750  private  text         3     0  -
GetNearFloorReq_invalid               01E7         no  WORD  Internal   rel    754  private  text         3     0  -
GetNearFloorReq_exit                  01EA         no  WORD  Internal   rel    757  private  text         3     0  -

IWDG_KR                           ????????         no  WORD  External   rel    161  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
IWDG_PR                           ????????         no  WORD  External   rel    163  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
IWDG_RLR                          ????????         no  WORD  External   rel    165  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
I2C_CR1                           ????????         no  WORD  External   rel    203  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
I2C_CR2                           ????????         no  WORD  External   rel    205  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
I2C_FREQR                         ????????         no  WORD  External   rel    207  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
I2C_OARL                          ????????         no  WORD  External   rel    209  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
I2C_OARH                          ????????         no  WORD  External   rel    211  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
I2C_DR                            ????????         no  WORD  External   rel    213  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
I2C_SR1                           ????????         no  WORD  External   rel    215  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
I2C_SR2                           ????????         no  WORD  External   rel    217  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
I2C_SR3                           ????????         no  WORD  External   rel    219  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
I2C_ITR                           ????????         no  WORD  External   rel    221  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
I2C_CCRL                          ????????         no  WORD  External   rel    223  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
I2C_CCRH                          ????????         no  WORD  External   rel    225  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
I2C_TRISER                        ????????         no  WORD  External   rel    227  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
I2C_PECR                          ????????         no  WORD  External   rel    229  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ITC_SPR1                          ????????         no  WORD  External   rel    507  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ITC_SPR2                          ????????         no  WORD  External   rel    509  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ITC_SPR3                          ????????         no  WORD  External   rel    511  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ITC_SPR4                          ????????         no  WORD  External   rel    513  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ITC_SPR5                          ????????         no  WORD  External   rel    515  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ITC_SPR6                          ????????         no  WORD  External   rel    517  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
ITC_SPR7                          ????????         no  WORD  External   rel    519  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
IsQueueFull                       ????????         no  WORD  External   rel     15  private  text         0     0  e:\stm8s\elevator\request.inc
IsQueueEmpty                      ????????         no  WORD  External   rel     16  private  text         0     0  e:\stm8s\elevator\request.inc
IncRotatePointer                  ????????         no  WORD  External   rel     19  private  text         0     0  e:\stm8s\elevator\request.inc
IsNextTargetDirection                 0124         no  WORD  Internal   rel    475  public   text         2     0  -
IsNextTargetDirection_start           0126         no  WORD  Internal   rel    478  private  text        17     0  -
IsNextTargetDirection_down            0137         no  WORD  Internal   rel    492  private  text         4     0  -
IsNextTargetDirection_up              013B         no  WORD  Internal   rel    495  private  text         4     0  -
IsNextTargetDirection_True            013F         no  WORD  Internal   rel    499  private  text         4     0  -
IsNextTargetDirection_False           0143         no  WORD  Internal   rel    502  private  text         2     0  -
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 31  Assembler
                                               e:\stm8s\elevator\request.asm

IsNextTargetDirection_exit            0145         no  WORD  Internal   rel    504  private  text         4     0  -
IsReached                             0180         no  WORD  Internal   rel    629  public   text         1     0  -
IsReached_start                       0181         no  WORD  Internal   rel    632  private  text         7     0  -
IsReached_True                        0188         no  WORD  Internal   rel    638  private  text         4     0  -
IsReached_False                       018C         no  WORD  Internal   rel    641  private  text         2     0  -
IsReached_exit                        018E         no  WORD  Internal   rel    643  private  text         2     0  -
IsAllReqDone                          0190         no  WORD  Internal   rel    660  public   text         2     0  -
IsAllReqDone_start                    0192         no  WORD  Internal   rel    663  private  text         3     0  -
IsAllReqDone_loop                     0195         no  WORD  Internal   rel    665  private  text        10     0  -
IsAllReqDone_True                     019F         no  WORD  Internal   rel    671  private  text         4     0  -
IsAllReqDone_False                    01A3         no  WORD  Internal   rel    674  private  text         2     0  -
IsAllReqDone_exit                     01A5         no  WORD  Internal   rel    676  private  text         3     0  -

LED_Refresh                       ????????         no  WORD  External   rel     33  private  text         0     0  e:\stm8s\elevator\request.inc

OpenDoor                          ????????         no  WORD  External   rel     30  private  text         0     0  e:\stm8s\elevator\request.inc

PA_ODR                            ????????         no  WORD  External   rel     16  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PA_IDR                            ????????         no  WORD  External   rel     18  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PA_DDR                            ????????         no  WORD  External   rel     20  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PA_CR1                            ????????         no  WORD  External   rel     22  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PA_CR2                            ????????         no  WORD  External   rel     24  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PB_ODR                            ????????         no  WORD  External   rel     29  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PB_IDR                            ????????         no  WORD  External   rel     31  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PB_DDR                            ????????         no  WORD  External   rel     33  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PB_CR1                            ????????         no  WORD  External   rel     35  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PB_CR2                            ????????         no  WORD  External   rel     37  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PC_ODR                            ????????         no  WORD  External   rel     42  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PC_IDR                            ????????         no  WORD  External   rel     44  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PC_DDR                            ????????         no  WORD  External   rel     46  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PC_CR1                            ????????         no  WORD  External   rel     48  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PC_CR2                            ????????         no  WORD  External   rel     50  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PD_ODR                            ????????         no  WORD  External   rel     55  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PD_IDR                            ????????         no  WORD  External   rel     57  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PD_DDR                            ????????         no  WORD  External   rel     59  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PD_CR1                            ????????         no  WORD  External   rel     61  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PD_CR2                            ????????         no  WORD  External   rel     63  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PE_ODR                            ????????         no  WORD  External   rel     68  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PE_IDR                            ????????         no  WORD  External   rel     70  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PE_DDR                            ????????         no  WORD  External   rel     72  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PE_CR1                            ????????         no  WORD  External   rel     74  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PE_CR2                            ????????         no  WORD  External   rel     76  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PF_ODR                            ????????         no  WORD  External   rel     81  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PF_IDR                            ????????         no  WORD  External   rel     83  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PF_DDR                            ????????         no  WORD  External   rel     85  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PF_CR1                            ????????         no  WORD  External   rel     87  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PF_CR2                            ????????         no  WORD  External   rel     89  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
PutNewTarget                      ????????         no  WORD  External   rel     10  private  text         0     0  e:\stm8s\elevator\request.inc
PutTargetFloor                        00BD         no  WORD  Internal   rel    339  public   text         1     0  -
PutTargetFloor_start                  00BE         no  WORD  Internal   rel    341  private  text        21     0  -
PutTargetFloor_put                    00D3         no  WORD  Internal   rel    354  private  text         3     0  -
PutTargetFloor_exit                   00D6         no  WORD  Internal   rel    356  private  text         2     0  -

RST_SR                            ????????         no  WORD  External   rel    120  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
Request                               0000         no  WORD  Internal   rel     26  public   text         3     0  -
Request_start                         0003         no  WORD  Internal   rel     30  private  text        29     0  -
Request_launch                        0020         no  WORD  Internal   rel     55  private  text         5     0  -
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 32  Assembler
                                               e:\stm8s\elevator\request.asm

Request_exit                          0025         no  WORD  Internal   rel     59  private  text         4     0  -

SPI_CR1                           ????????         no  WORD  External   rel    184  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
SPI_CR2                           ????????         no  WORD  External   rel    186  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
SPI_ICR                           ????????         no  WORD  External   rel    188  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
SPI_SR                            ????????         no  WORD  External   rel    190  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
SPI_DR                            ????????         no  WORD  External   rel    192  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
SPI_CRCPR                         ????????         no  WORD  External   rel    194  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
SPI_RXCRCR                        ????????         no  WORD  External   rel    196  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
SPI_TXCRCR                        ????????         no  WORD  External   rel    198  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc

TIM1_CR1                          ????????         no  WORD  External   rel    261  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CR2                          ????????         no  WORD  External   rel    263  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_SMCR                         ????????         no  WORD  External   rel    265  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_ETR                          ????????         no  WORD  External   rel    267  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_IER                          ????????         no  WORD  External   rel    269  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_SR1                          ????????         no  WORD  External   rel    271  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_SR2                          ????????         no  WORD  External   rel    273  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_EGR                          ????????         no  WORD  External   rel    275  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CCMR1                        ????????         no  WORD  External   rel    277  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CCMR2                        ????????         no  WORD  External   rel    279  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CCMR3                        ????????         no  WORD  External   rel    281  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CCMR4                        ????????         no  WORD  External   rel    283  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CCER1                        ????????         no  WORD  External   rel    285  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CCER2                        ????????         no  WORD  External   rel    287  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CNTRH                        ????????         no  WORD  External   rel    289  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CNTRL                        ????????         no  WORD  External   rel    291  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_PSCRH                        ????????         no  WORD  External   rel    293  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_PSCRL                        ????????         no  WORD  External   rel    295  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_ARRH                         ????????         no  WORD  External   rel    297  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_ARRL                         ????????         no  WORD  External   rel    299  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_RCR                          ????????         no  WORD  External   rel    301  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CCR1H                        ????????         no  WORD  External   rel    303  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CCR1L                        ????????         no  WORD  External   rel    305  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CCR2H                        ????????         no  WORD  External   rel    307  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CCR2L                        ????????         no  WORD  External   rel    309  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CCR3H                        ????????         no  WORD  External   rel    311  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CCR3L                        ????????         no  WORD  External   rel    313  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CCR4H                        ????????         no  WORD  External   rel    315  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_CCR4L                        ????????         no  WORD  External   rel    317  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_BKR                          ????????         no  WORD  External   rel    319  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_DTR                          ????????         no  WORD  External   rel    321  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM1_OISR                         ????????         no  WORD  External   rel    323  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_CR1                          ????????         no  WORD  External   rel    328  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_IER                          ????????         no  WORD  External   rel    330  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_SR1                          ????????         no  WORD  External   rel    332  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_SR2                          ????????         no  WORD  External   rel    334  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_EGR                          ????????         no  WORD  External   rel    336  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_CCMR1                        ????????         no  WORD  External   rel    338  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_CCMR2                        ????????         no  WORD  External   rel    340  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_CCMR3                        ????????         no  WORD  External   rel    342  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_CCER1                        ????????         no  WORD  External   rel    344  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_CCER2                        ????????         no  WORD  External   rel    346  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_CNTRH                        ????????         no  WORD  External   rel    348  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_CNTRL                        ????????         no  WORD  External   rel    350  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_PSCR                         ????????         no  WORD  External   rel    352  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_ARRH                         ????????         no  WORD  External   rel    354  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
STMicroelectronics assembler v4.52   (C)1987-2019   Wed Jun 19 15:36:18 2019
Page 33  Assembler
                                               e:\stm8s\elevator\request.asm

TIM2_ARRL                         ????????         no  WORD  External   rel    356  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_CCR1H                        ????????         no  WORD  External   rel    358  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_CCR1L                        ????????         no  WORD  External   rel    360  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_CCR2H                        ????????         no  WORD  External   rel    362  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_CCR2L                        ????????         no  WORD  External   rel    364  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_CCR3H                        ????????         no  WORD  External   rel    366  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM2_CCR3L                        ????????         no  WORD  External   rel    368  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_CR1                          ????????         no  WORD  External   rel    373  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_IER                          ????????         no  WORD  External   rel    375  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_SR1                          ????????         no  WORD  External   rel    377  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_SR2                          ????????         no  WORD  External   rel    379  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_EGR                          ????????         no  WORD  External   rel    381  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_CCMR1                        ????????         no  WORD  External   rel    383  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_CCMR2                        ????????         no  WORD  External   rel    385  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_CCER1                        ????????         no  WORD  External   rel    387  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_CNTRH                        ????????         no  WORD  External   rel    389  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_CNTRL                        ????????         no  WORD  External   rel    391  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_PSCR                         ????????         no  WORD  External   rel    393  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_ARRH                         ????????         no  WORD  External   rel    395  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_ARRL                         ????????         no  WORD  External   rel    397  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_CCR1H                        ????????         no  WORD  External   rel    399  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_CCR1L                        ????????         no  WORD  External   rel    401  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_CCR2H                        ????????         no  WORD  External   rel    403  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM3_CCR2L                        ????????         no  WORD  External   rel    405  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM4_CR1                          ????????         no  WORD  External   rel    410  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM4_IER                          ????????         no  WORD  External   rel    412  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM4_SR                           ????????         no  WORD  External   rel    414  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM4_EGR                          ????????         no  WORD  External   rel    416  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM4_CNTR                         ????????         no  WORD  External   rel    418  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM4_PSCR                         ????????         no  WORD  External   rel    420  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TIM4_ARR                          ????????         no  WORD  External   rel    422  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
TARGET_QUEUE_BOTTOM               ????????         no  WORD  External   rel     54  private  text         0     0  e:\stm8s\elevator\variable.inc
TEMP_TARGET_FLOOR_BUTTOM          ????????         no  BYTE  External   rel     57  private  text         0     0  e:\stm8s\elevator\variable.inc
TEMP_TARGET_FLOOR_TOP             ????????         no  BYTE  External   rel     58  private  text         0     0  e:\stm8s\elevator\variable.inc

UART2_SR                          ????????         no  WORD  External   rel    234  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
UART2_DR                          ????????         no  WORD  External   rel    236  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
UART2_BRR1                        ????????         no  WORD  External   rel    238  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
UART2_BRR2                        ????????         no  WORD  External   rel    240  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
UART2_CR1                         ????????         no  WORD  External   rel    242  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
UART2_CR2                         ????????         no  WORD  External   rel    244  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
UART2_CR3                         ????????         no  WORD  External   rel    246  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
UART2_CR4                         ????????         no  WORD  External   rel    248  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
UART2_CR5                         ????????         no  WORD  External   rel    250  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
UART2_CR6                         ????????         no  WORD  External   rel    252  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
UART2_GTR                         ????????         no  WORD  External   rel    254  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
UART2_PSCR                        ????????         no  WORD  External   rel    256  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc

WWDG_CR                           ????????         no  WORD  External   rel    154  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
WWDG_WR                           ????????         no  WORD  External   rel    156  private  text         0     0  c:\program files (x86)\stmicroelectronics\st_toolset\asm\include\STM8S105K.inc
W_CUR_TARGET_PTR                  ????????         no  BYTE  External   rel     48  private  text         0     0  e:\stm8s\elevator\variable.inc
W_NEW_PTR                         ????????         no  BYTE  External   rel     49  private  text         0     0  e:\stm8s\elevator\variable.inc
W_TIMER3_HANDLER                  ????????         no  BYTE  External   rel     62  private  text         0     0  e:\stm8s\elevator\variable.inc


321 labels
No errors on assembly of 'e:\stm8s\elevator\request.asm'